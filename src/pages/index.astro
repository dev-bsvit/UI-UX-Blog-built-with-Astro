---
import { getCollection } from 'astro:content';
import LayoutWithSidebar from '../layouts/LayoutWithSidebar.astro';
import PostCard from '../components/PostCard.astro';

// –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –ø–æ—Å—Ç—ã
const allPosts = await getCollection('posts', ({ data }) => !data.draft);

// –°–æ—Ä—Ç–∏—Ä—É–µ–º –ø–æ—Å—Ç—ã –∑–∞ –¥–∞—Ç–æ–π (–Ω–∞–π–Ω–æ–≤—ñ—à—ñ —Å–ø–æ—á–∞—Ç–∫—É)
const sortedPosts = allPosts.sort((a, b) => 
  new Date(b.data.publishedAt).getTime() - new Date(a.data.publishedAt).getTime()
);

// –î–ª—è –≤–∫–ª–∞–¥–∫–∏ "–ü–æ–ø—É–ª—è—Ä–Ω–µ" (–ø–æ–∫–∏ —â–æ –ø—Ä–æ—Å—Ç–æ –±–µ—Ä–µ–º–æ featured)
const popularPosts = sortedPosts.filter(post => post.data.featured);
---

<LayoutWithSidebar title="UI/UX –ë–ª–æ–≥ - –ì–æ–ª–æ–≤–Ω–∞" description="–ë–ª–æ–≥ –ø—Ä–æ UI/UX –¥–∏–∑–∞–π–Ω, –≤–µ–±-—Ä–æ–∑—Ä–æ–±–∫—É —Ç–∞ —Å—É—á–∞—Å–Ω—ñ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó" currentPath="/">
  <!-- Hero —Å–µ–∫—Ü–∏—è -->
  <section class="bg-gradient-to-r from-purple-600 to-blue-600 text-white rounded-3xl p-8 mb-8">
    <div class="max-w-4xl">
      <h1 class="text-4xl md:text-5xl font-bold mb-4">
        –õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ UI/UX –±–ª–æ–≥—É! üëã
      </h1>
      <p class="text-xl mb-6 opacity-90">
        –¢—É—Ç –≤–∏ –∑–Ω–∞–π–¥–µ—Ç–µ –Ω–∞–π—Å–≤—ñ–∂—ñ—à—ñ —Å—Ç–∞—Ç—Ç—ñ –ø—Ä–æ –¥–∏–∑–∞–π–Ω, UX-–¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è, –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å —Ç–∞ —Å—É—á–∞—Å–Ω—ñ —Ç—Ä–µ–Ω–¥–∏ —É –≤–µ–±-—Ä–æ–∑—Ä–æ–±—Ü—ñ.
      </p>
      <div class="flex flex-wrap gap-4">
        <a href="#latest" class="bg-white text-purple-600 px-6 py-3 rounded-lg font-medium hover:bg-gray-100 transition-colors">
          –ß–∏—Ç–∞—Ç–∏ —Å—Ç–∞—Ç—Ç—ñ
        </a>
        <a href="/about" class="border border-white/30 px-6 py-3 rounded-lg font-medium hover:bg-white/10 transition-colors">
          –ü—Ä–æ –±–ª–æ–≥
        </a>
      </div>
    </div>
  </section>

  <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º -->
  <div class="flex flex-wrap gap-2 mb-8">
    <button class="tab-button active px-4 py-2 rounded-lg bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 font-medium" data-tab="latest">
      –û—Å—Ç–∞–Ω–Ω—ñ
    </button>
    <button class="tab-button px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-200 dark:hover:bg-gray-700" data-tab="popular">
      –ü–æ–ø—É–ª—è—Ä–Ω—ñ
    </button>
    <button class="tab-button px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-200 dark:hover:bg-gray-700" data-tab="design">
      –î–∏–∑–∞–π–Ω
    </button>
    <button class="tab-button px-4 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 font-medium hover:bg-gray-200 dark:hover:bg-gray-700" data-tab="research">
      –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è
    </button>
  </div>

  <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –≤–∫–ª–∞–¥–æ–∫ -->
  <div id="latest" class="tab-content">
    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">–û—Å—Ç–∞–Ω–Ω—ñ —Å—Ç–∞—Ç—Ç—ñ</h2>
    <!-- –°—Ç–∞—Ç—Ç—ñ -->
    <div class="grid grid-cols-1 gap-4">
      {sortedPosts.map((post) => (
        <PostCard post={post} />
      ))}
    </div>
  </div>

  <div id="popular" class="tab-content hidden">
    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">–ü–æ–ø—É–ª—è—Ä–Ω—ñ —Å—Ç–∞—Ç—Ç—ñ</h2>
    <div class="grid grid-cols-1 gap-4">
      {popularPosts.length > 0 ? (
        popularPosts.map((post) => (
          <PostCard post={post} />
        ))
      ) : (
        <p class="text-gray-600 dark:text-gray-400 text-center py-8">
          –ü–æ–∫–∏ —â–æ –Ω–µ–º–∞—î –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —Å—Ç–∞—Ç–µ–π
        </p>
      )}
    </div>
  </div>

  <div id="design" class="tab-content hidden">
    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">–°—Ç–∞—Ç—Ç—ñ –ø—Ä–æ –¥–∏–∑–∞–π–Ω</h2>
    <div class="grid grid-cols-1 gap-4">
      {sortedPosts.filter(post => post.data.category === 'Design').map((post) => (
        <PostCard post={post} />
      ))}
    </div>
  </div>

  <div id="research" class="tab-content hidden">
    <h2 class="text-2xl font-bold mb-6 text-gray-900 dark:text-white">UX –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è</h2>
    <div class="grid grid-cols-1 gap-4">
      {sortedPosts.filter(post => post.data.category === 'Research').map((post) => (
        <PostCard post={post} />
      ))}
    </div>
  </div>
</LayoutWithSidebar>

<script>
  // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
  document.addEventListener('DOMContentLoaded', () => {
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        const tabId = button.getAttribute('data-tab');
        
        // –£–±–∏—Ä–∞–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å —Å–æ –≤—Å–µ—Ö –∫–Ω–æ–ø–æ–∫
        tabButtons.forEach(btn => {
          btn.classList.remove('active', 'bg-purple-100', 'dark:bg-purple-900', 'text-purple-800', 'dark:text-purple-200');
          btn.classList.add('bg-gray-100', 'dark:bg-gray-800', 'text-gray-700', 'dark:text-gray-300');
        });
        
        // –î–æ–±–∞–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –∫–ª–∞—Å—Å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–µ
        button.classList.add('active', 'bg-purple-100', 'dark:bg-purple-900', 'text-purple-800', 'dark:text-purple-200');
        button.classList.remove('bg-gray-100', 'dark:bg-gray-800', 'text-gray-700', 'dark:text-gray-300');
        
        // –°–∫—Ä—ã–≤–∞–µ–º –≤—Å–µ –≤–∫–ª–∞–¥–∫–∏
        tabContents.forEach(content => {
          content.classList.add('hidden');
        });
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—É—é –≤–∫–ª–∞–¥–∫—É
        const activeTab = document.getElementById(tabId);
        if (activeTab) {
          activeTab.classList.remove('hidden');
        }
      });
    });
  });
</script>

 